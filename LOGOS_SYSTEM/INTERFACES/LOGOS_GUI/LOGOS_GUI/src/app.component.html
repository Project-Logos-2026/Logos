
<div class="relative h-screen w-full flex flex-col items-center justify-center overflow-hidden bg-[#050507]">
  
  <!-- Header Bar -->
  <header class="absolute top-0 left-0 w-full p-8 flex justify-between items-center z-50">
    <div class="flex items-center gap-3 group cursor-default">
      <div class="w-1.5 h-1.5 rounded-full bg-cyan-400 shadow-[0_0_12px_rgba(34,211,238,1)]"></div>
      <span class="font-logos text-[10px] uppercase tracking-[0.3em] text-cyan-400/80">LOGOS SYSTEM</span>
    </div>
    <div class="flex gap-8 text-[10px] uppercase tracking-[0.2em] text-gray-600 font-medium">
      <button class="hover:text-cyan-400 transition-colors">Core</button>
      <button class="hover:text-cyan-400 transition-colors">Protocol</button>
      <button class="hover:text-cyan-400 transition-colors">Uptime</button>
    </div>
  </header>

  <!-- Background / Central Logo Text -->
  <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
    <div 
      class="logo-container transition-all duration-1000 ease-in-out relative flex items-center justify-center"
      [class.faded-out]="hasStartedInteraction()"
    >
	 <img
	 src="assets/trinity_knot.png"
	 alt="Trinitarian Knot"
	 class="absolute w-[420px] opacity-20 z-0 select-none"
/>
      <!-- Centered LOGOS Text -->
      <h1 class="font-logos text-6xl text-cyan-400 glitch tracking-[0.5em] select-none opacity-90" style="margin-right: -0.5em;">LOGOS</h1>
    </div>
  </div>

  <!-- Conversation Area -->
  @if (hasStartedInteraction()) {
    <div id="chat-scroll-area" class="w-full max-w-2xl flex-1 mt-24 mb-36 overflow-y-auto px-6 message-container z-10 scroll-smooth">
      <div class="flex flex-col gap-10 pb-12">
        @for (msg of messages(); track msg.timestamp.getTime()) {
          <div class="flex w-full" [class.justify-end]="msg.role === 'user'">
            <div class="max-w-[85%] flex flex-col gap-2">
              <div class="text-[9px] text-gray-500 uppercase tracking-[0.3em] px-1 font-semibold">
                {{ msg.role === 'user' ? 'Client.ID' : 'Logos.Core' }}
              </div>
              <div 
                class="px-6 py-4 rounded-3xl text-[14px] leading-relaxed tracking-wide shadow-2xl"
                [class.bg-white/[0.03]]="msg.role === 'assistant'"
                [class.backdrop-blur-md]="msg.role === 'assistant'"
                [class.text-cyan-100]="msg.role === 'assistant'"
                [class.bg-cyan-500/[0.05]]="msg.role === 'user'"
                [class.border]="msg.role === 'user'"
                [class.border-cyan-500/20]="msg.role === 'user'"
                [class.text-cyan-50]="msg.role === 'user'"
              >
                {{ msg.content }}
              </div>
            </div>
          </div>
        }
        @if (isProcessing()) {
          <div class="flex w-full">
            <div class="flex flex-col gap-2">
              <div class="text-[9px] text-gray-500 uppercase tracking-[0.3em] px-1 font-semibold">Logos.Core</div>
              <div class="flex gap-2 px-5 py-3 items-center opacity-50">
                <div class="w-1 h-1 bg-cyan-400 rounded-full animate-ping"></div>
                <div class="w-1 h-1 bg-cyan-400 rounded-full animate-ping [animation-delay:0.2s]"></div>
                <div class="w-1 h-1 bg-cyan-400 rounded-full animate-ping [animation-delay:0.4s]"></div>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  }

  <!-- Footer / Input Area -->
  <div class="absolute bottom-12 left-0 w-full px-6 flex flex-col items-center gap-4 z-50">
    <div class="w-full max-w-xl relative group">
      <div class="absolute inset-0 bg-cyan-500/5 blur-xl rounded-full opacity-0 group-focus-within:opacity-100 transition-opacity"></div>
      
      <!-- Microphone Button (Left) -->
      <button 
        (click)="toggleVoiceInput()"
        [class.mic-active]="isListening()"
        class="absolute left-4 top-1/2 -translate-y-1/2 p-2.5 rounded-xl text-gray-600 hover:text-cyan-400 hover:bg-cyan-400/10 transition-all z-10"
        title="Voice Input"
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z" />
        </svg>
      </button>

      <textarea
        [ngModel]="inputText()"
        (ngModelChange)="inputText.set($event)"
        (keydown)="onKeyDown($event)"
        rows="1"
        placeholder="{{ isListening() ? 'Listening...' : 'Input command...' }}"
        class="relative w-full bg-[#0d0d10]/90 backdrop-blur-2xl border border-white/5 rounded-2xl py-5 pl-14 pr-16 text-sm text-cyan-50 placeholder-gray-600 focus:outline-none focus:border-cyan-500/30 transition-all resize-none shadow-2xl"
      ></textarea>
      
      <!-- Send Button (Right) -->
      <button 
        (click)="sendMessage()"
        [disabled]="!inputText().trim() || isProcessing()"
        class="absolute right-4 top-1/2 -translate-y-1/2 p-2.5 rounded-xl text-cyan-500/60 hover:text-cyan-400 hover:bg-cyan-400/10 disabled:opacity-10 disabled:hover:bg-transparent transition-all"
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
      </button>
    </div>
    
    <div class="flex items-center gap-6">
      <div class="text-[9px] text-gray-600 tracking-[0.4em] font-medium flex items-center gap-2">
        <span class="w-1 h-1 bg-gray-800 rounded-full"></span>
        {{ isListening() ? 'CAPTURING AUDIO' : 'ESTABLISHING NEURAL LINK' }}
      </div>
    </div>
  </div>

  <!-- Ambient Soul Glow (Animated) -->
  <div class="absolute top-1/2 left-1/2 w-[900px] h-[900px] bg-cyan-500/5 blur-[140px] rounded-full pointer-events-none pulse-glow z-0"></div>

</div>
